{
  "openapi": "3.1.0",
  "info": {
    "title": "BRP API Gebeurtenissen",
    "version": "1.0.0",
    "description": "Voorbeeld OAS specificatie waarin VerhuisdEvent en IngeschrevenEvent worden getoond."
  },
  "paths": {
    "/events/verhuisd": {
      "get": {
        "summary": "Haal Verhuisd events op",
        "operationId": "getVerhuisdEvents",
        "responses": {
          "200": {
            "description": "Lijst van Verhuisd events",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VerhuisdEvent"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/events/ingeschreven": {
      "get": {
        "summary": "Haal Ingeschreven events op",
        "operationId": "getIngeschrevenEvents",
        "responses": {
          "200": {
            "description": "Lijst van Ingeschreven events",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/IngeschrevenEvent"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "VerhuisdEvent": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/VerhuisdBinnenGemeentelijk"
          },
          {
            "$ref": "#/components/schemas/VerhuisdBuitenGemeentelijk"
          },
          {
            "$ref": "#/components/schemas/VerhuisdEmigratie"
          },
          {
            "$ref": "#/components/schemas/VerhuisdImmigratie"
          }
        ]
      },
      "IngeschrevenEvent": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/IngeschrevenGeboorte"
          },
          {
            "$ref": "#/components/schemas/IngeschrevenNietIngezeten"
          },
          {
            "$ref": "#/components/schemas/IngeschrevenImmigratie"
          }
        ]
      },
      "iddef": {
        "type": "string",
        "minLength": 1
      },
      "sourcedef": {
        "type": "string",
        "format": "uri-reference",
        "minLength": 1
      },
      "specversiondef": {
        "type": "string",
        "minLength": 1
      },
      "typedef": {
        "type": "string",
        "minLength": 1
      },
      "datacontenttypedef": {
        "type": [
          "string",
          "null"
        ],
        "minLength": 1
      },
      "dataschemadef": {
        "type": [
          "string",
          "null"
        ],
        "format": "uri",
        "minLength": 1
      },
      "subjectdef": {
        "type": [
          "string",
          "null"
        ],
        "minLength": 1
      },
      "timedef": {
        "type": [
          "string",
          "null"
        ],
        "format": "date-time",
        "minLength": 1
      },
      "datadef": {
        "type": [
          "object",
          "string",
          "number",
          "array",
          "boolean",
          "null"
        ]
      },
      "data_base64def": {
        "type": [
          "string",
          "null"
        ],
        "contentEncoding": "base64"
      },
      "cloud-events-v1.0.2": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "description": "CloudEvents Specification JSON Schema",
        "type": "object",
        "properties": {
          "id": {
            "description": "Identifies the event.",
            "$ref": "#/components/schemas/iddef",
            "examples": [
              "A234-1234-1234"
            ]
          },
          "source": {
            "description": "Identifies the context in which an event happened.",
            "$ref": "#/components/schemas/sourcedef",
            "examples": [
              "https://github.com/cloudevents",
              "mailto:cncf-wg-serverless@lists.cncf.io",
              "urn:uuid:6e8bc430-9c3a-11d9-9669-0800200c9a66",
              "cloudevents/spec/pull/123",
              "/sensors/tn-1234567/alerts",
              "1-555-123-4567"
            ]
          },
          "specversion": {
            "description": "The version of the CloudEvents specification which the event uses.",
            "$ref": "#/components/schemas/specversiondef",
            "examples": [
              "1.0"
            ]
          },
          "type": {
            "description": "Describes the type of event related to the originating occurrence.",
            "$ref": "#/components/schemas/typedef",
            "examples": [
              "com.github.pull_request.opened",
              "com.example.object.deleted.v2"
            ]
          },
          "datacontenttype": {
            "description": "Content type of the data value. Must adhere to RFC 2046 format.",
            "$ref": "#/components/schemas/datacontenttypedef",
            "examples": [
              "text/xml",
              "application/json",
              "image/png",
              "multipart/form-data"
            ]
          },
          "dataschema": {
            "description": "Identifies the schema that data adheres to.",
            "$ref": "#/components/schemas/dataschemadef"
          },
          "subject": {
            "description": "Describes the subject of the event in the context of the event producer (identified by source).",
            "$ref": "#/components/schemas/subjectdef",
            "examples": [
              "mynewfile.jpg"
            ]
          },
          "time": {
            "description": "Timestamp of when the occurrence happened. Must adhere to RFC 3339.",
            "$ref": "#/components/schemas/timedef",
            "examples": [
              "2018-04-05T17:31:00Z"
            ]
          },
          "data": {
            "description": "The event payload.",
            "$ref": "#/components/schemas/datadef",
            "examples": [
              "<much wow=\"xml\"/>"
            ]
          },
          "data_base64": {
            "description": "Base64 encoded event payload. Must adhere to RFC4648.",
            "$ref": "#/components/schemas/data_base64def",
            "examples": [
              "Zm9vYg=="
            ]
          }
        },
        "required": [
          "id",
          "source",
          "specversion",
          "type"
        ],
        "definitions": {
          "iddef": {
            "type": "string",
            "minLength": 1
          },
          "sourcedef": {
            "type": "string",
            "format": "uri-reference",
            "minLength": 1
          },
          "specversiondef": {
            "type": "string",
            "minLength": 1
          },
          "typedef": {
            "type": "string",
            "minLength": 1
          },
          "datacontenttypedef": {
            "type": [
              "string",
              "null"
            ],
            "minLength": 1
          },
          "dataschemadef": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri",
            "minLength": 1
          },
          "subjectdef": {
            "type": [
              "string",
              "null"
            ],
            "minLength": 1
          },
          "timedef": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "minLength": 1
          },
          "datadef": {
            "type": [
              "object",
              "string",
              "number",
              "array",
              "boolean",
              "null"
            ]
          },
          "data_base64def": {
            "type": [
              "string",
              "null"
            ],
            "contentEncoding": "base64"
          }
        }
      },
      "PlId": {
        "type": "integer",
        "example": 1
      },
      "AdresId": {
        "type": "integer",
        "example": 1
      },
      "e1030": {
        "type": "string",
        "example": "20250901"
      },
      "VerhuisdGemeentelijkData": {
        "type": "object",
        "properties": {
          "pl_id": {
            "$ref": "#/components/schemas/PlId"
          },
          "adres_id": {
            "$ref": "#/components/schemas/AdresId"
          },
          "c08": {
            "type": "object",
            "properties": {
              "e1030": {
                "$ref": "#/components/schemas/e1030"
              }
            }
          }
        }
      },
      "VerhuisdBinnenGemeentelijk": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.verhuisd"
                ]
              },
              "subject": {
                "enum": [
                  "binnengemeentelijk"
                ]
              },
              "data": {
                "$ref": "#/components/schemas/VerhuisdGemeentelijkData"
              }
            }
          }
        ]
      },
      "VerhuisdBuitenGemeentelijk": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.verhuisd"
                ]
              },
              "subject": {
                "enum": [
                  "buitengemeentelijk"
                ]
              },
              "data": {
                "$ref": "#/components/schemas/VerhuisdGemeentelijkData"
              }
            }
          }
        ]
      },
      "e1310": {
        "type": "string",
        "example": "6030"
      },
      "e1320": {
        "type": "string",
        "example": "20250901"
      },
      "e1330": {
        "type": "string",
        "example": "Rue du pomme 26"
      },
      "e1340": {
        "type": "string",
        "example": "Bruxelles"
      },
      "e1350": {
        "type": "string",
        "example": "postcode 1000"
      },
      "VerhuisdEmigratieData": {
        "type": "object",
        "properties": {
          "pl_id": {
            "$ref": "#/components/schemas/PlId"
          },
          "c08": {
            "type": "object",
            "properties": {
              "e1310": {
                "$ref": "#/components/schemas/e1310"
              },
              "e1320": {
                "$ref": "#/components/schemas/e1320"
              },
              "e1330": {
                "$ref": "#/components/schemas/e1330"
              },
              "e1340": {
                "$ref": "#/components/schemas/e1340"
              },
              "e1350": {
                "$ref": "#/components/schemas/e1350"
              }
            }
          }
        }
      },
      "VerhuisdEmigratie": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.verhuisd"
                ]
              },
              "subject": {
                "enum": [
                  "emigratie"
                ]
              },
              "data": {
                "$ref": "#/components/schemas/VerhuisdEmigratieData"
              }
            }
          }
        ]
      },
      "VerhuisdImmigratieData": {
        "type": "object",
        "properties": {
          "pl_id": {
            "$ref": "#/components/schemas/PlId"
          },
          "c08": {
            "type": "object",
            "properties": {
              "e1310": {
                "$ref": "#/components/schemas/e1310"
              }
            }
          }
        }
      },
      "VerhuisdImmigratie": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.verhuisd"
                ]
              },
              "subject": {
                "enum": [
                  "immigratie"
                ]
              },
              "data": {
                "$ref": "#/components/schemas/VerhuisdImmigratieData"
              }
            }
          }
        ]
      },
      "IngeschrevenGeboorte": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.ingeschreven"
                ]
              },
              "subject": {
                "enum": [
                  "geboorte"
                ]
              },
              "data": {
                "type": "object",
                "required": [
                  "pl_id"
                ],
                "properties": {
                  "pl_id": {
                    "$ref": "#/components/schemas/PlId"
                  }
                }
              }
            }
          }
        ]
      },
      "IngeschrevenNietIngezeten": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.ingeschreven"
                ]
              },
              "subject": {
                "enum": [
                  "niet-ingezeten"
                ]
              },
              "data": {
                "type": "object",
                "required": [
                  "pl_id"
                ],
                "properties": {
                  "pl_id": {
                    "$ref": "#/components/schemas/PlId"
                  }
                }
              }
            }
          }
        ]
      },
      "IngeschrevenImmigratie": {
        "allOf": [
          {
            "$ref": "#/components/schemas/cloud-events-v1.0.2"
          },
          {
            "required": [
              "type",
              "subject",
              "data"
            ]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nl.brp.ingeschreven"
                ]
              },
              "subject": {
                "enum": [
                  "immigratie"
                ]
              },
              "data": {
                "type": "object",
                "required": [
                  "pl_id"
                ],
                "properties": {
                  "pl_id": {
                    "$ref": "#/components/schemas/PlId"
                  }
                }
              }
            }
          }
        ]
      }
    }
  }
}